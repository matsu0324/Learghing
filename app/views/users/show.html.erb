<div class="container">
  <div class="row">
    <div class="col-lg-4">
      <div class="profile-image">
        <%= attachment_image_tag @user, :image, :fill, 50, 50, fallback: "no-image.jpg" %>
      </div>
      <div class="profile-name">
        <%= @user.name %>
      </div>
      <!--フォロー機能-->
      <%= render 'users/follow', user: @user %>
      <!---->
      <p class="profile">Profile</p>
      <p class="profile-intro"><%= @user.profile %></p>
      <div class="profile-edit">
        <% if @user == current_user %>
			   <div><%= link_to "Edit", edit_user_path(@user), class: "btn btn-primary" %></div>
			   <div><%= link_to "Output", new_post_path(@post), class: "btn btn-primary" %></div>
		  	<% end %>
      </div>
      <!--カレンダー機能-->
        <%= render 'events/calendar', user: @user, event: @event %>
      <!---->
      <!-- カレンダー編集 -------------------------------------------------->
        <div id="inputEditForm">
          <%= render 'events/edit', events: @events %>
        </div>
        <script>
        // CRUDを行う際にCSRF対策のtokenを発行
          $(document).ready(function() {
          var prepare = function(options, originalOptions, jqXHR) {
            var token;
            if (!options.crossDomain) {
              token = $('meta[name="csrf-token"]').attr('content');
              if (token) {
                return jqXHR.setRequestHeader('X-CSRF-Token', token);
              }
            }
          };
          }
          )
          // カレンダー表示
          $('#calendar').fullCalendar ({
              header: {
                  left: 'prev,next today',
                  center: 'month,agendaWeek,agendaDay',
                  right: 'title'
              },
              buttonText: {
                    prev: "<",
                    next: ">"
              },
              timezone: 'UTC',
              events: '/users/events.json',
              navLinks: true,
              selectable: true,
              selectHelper: true,
              // 日付クリック
              dayClick : function ( date , jsEvent , view ) {
                  $('#inputScheduleForm').modal('show');
                  },

              // event クリックで編集、削除
              eventClick : function(event, jsEvent , view) {
                  jsEvent.preventDefault();
                  $(`#inputScheduleEditForm${event.id}`).modal('show');
              },

              eventMouseover : function(event, jsEvent , view) {
                  jsEvent.preventDefault();
              }
          })
        </script>
      <!-------------------->
    </div>
    <div class="col-lg-8">
      <% @posts.each do |post| %>
        <div class="sentence-image">
				  <%= link_to post_path(post) do %>
		  		  <%= attachment_image_tag post, :image, :fill, 50, 50, format: 'jpeg' %>
		  		<% end %>
  	  	</div>
				<div class="sentence"><%= post.sentence %></div>
			<% end %>
    </div>
  </div>
</div>